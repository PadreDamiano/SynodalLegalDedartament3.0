{"ast":null,"code":"import * as mock from './MockData';\nimport directoryController from './controllers/DirectoryController';\nimport appointmentController from './controllers/AppointmentController';\nconst RESPONSE_DELAY = 1000;\nconst ROUTING = {\n  [directoryController.getPath()]: directoryController,\n  [appointmentController.getPath()]: appointmentController\n};\n\nfunction getSuccessResponse(data, extraBodyProps = {}, extraProps = {}) {\n  let body = {\n    success: true,\n    ...extraBodyProps\n  };\n\n  if (data) {\n    body.data = data;\n  }\n\n  let resp = {\n    body,\n    ...extraProps,\n    statusCode: 200\n  }; // текстовое представление ответа\n\n  resp.text = JSON.stringify(resp);\n  return resp;\n}\n\nfunction getFailureResponse(code = 'error', message = 'Error', statusCode = 500) {\n  let resp = {\n    body: {\n      success: false,\n      error: {\n        code,\n        message\n      }\n    },\n    statusCode: statusCode\n  }; // текстовое представление ответа\n\n  resp.text = JSON.stringify(resp);\n  return resp;\n}\n\nclass MockServer {\n  service(request) {\n    return new Promise(resolve => {\n      const {\n        url,\n        params\n      } = request;\n      setTimeout(() => {\n        for (let path in ROUTING) {\n          if (url.includes(path)) {\n            const controller = ROUTING[path];\n\n            if (controller) {\n              resolve(getSuccessResponse(controller.handle(request)));\n            } else {\n              resolve(getFailureResponse('resource.not.found', 'Resource is not found'));\n            }\n          }\n        }\n      }, RESPONSE_DELAY);\n    });\n  }\n\n}\n\nexport default new MockServer();","map":{"version":3,"sources":["E:/Git/Work/SynodalLegalDedartament3.0/my-app/src/lib/mock/MockServer.js"],"names":["mock","directoryController","appointmentController","RESPONSE_DELAY","ROUTING","getPath","getSuccessResponse","data","extraBodyProps","extraProps","body","success","resp","statusCode","text","JSON","stringify","getFailureResponse","code","message","error","MockServer","service","request","Promise","resolve","url","params","setTimeout","path","includes","controller","handle"],"mappings":"AAAA,OAAO,KAAKA,IAAZ,MAAsB,YAAtB;AAEA,OAAOC,mBAAP,MAAgC,mCAAhC;AACA,OAAOC,qBAAP,MAAkC,qCAAlC;AAEA,MAAMC,cAAc,GAAG,IAAvB;AAEA,MAAMC,OAAO,GAAG;AACZ,GAACH,mBAAmB,CAACI,OAApB,EAAD,GAAiCJ,mBADrB;AAEZ,GAACC,qBAAqB,CAACG,OAAtB,EAAD,GAAmCH;AAFvB,CAAhB;;AAKA,SAASI,kBAAT,CAA6BC,IAA7B,EAAmCC,cAAc,GAAG,EAApD,EAAwDC,UAAU,GAAG,EAArE,EAAyE;AACrE,MAAIC,IAAI,GAAG;AAAEC,IAAAA,OAAO,EAAE,IAAX;AAAiB,OAAGH;AAApB,GAAX;;AAEA,MAAID,IAAJ,EAAU;AACNG,IAAAA,IAAI,CAACH,IAAL,GAAYA,IAAZ;AACH;;AAED,MAAIK,IAAI,GAAG;AACPF,IAAAA,IADO;AAEP,OAAGD,UAFI;AAGPI,IAAAA,UAAU,EAAE;AAHL,GAAX,CAPqE,CAarE;;AACAD,EAAAA,IAAI,CAACE,IAAL,GAAYC,IAAI,CAACC,SAAL,CAAeJ,IAAf,CAAZ;AAEA,SAAOA,IAAP;AACH;;AAED,SAASK,kBAAT,CAA6BC,IAAI,GAAG,OAApC,EAA6CC,OAAO,GAAG,OAAvD,EAAgEN,UAAU,GAAG,GAA7E,EAAkF;AAC9E,MAAID,IAAI,GAAG;AACPF,IAAAA,IAAI,EAAE;AACFC,MAAAA,OAAO,EAAE,KADP;AAEFS,MAAAA,KAAK,EAAE;AACHF,QAAAA,IADG;AAEHC,QAAAA;AAFG;AAFL,KADC;AAQPN,IAAAA,UAAU,EAAEA;AARL,GAAX,CAD8E,CAY9E;;AACAD,EAAAA,IAAI,CAACE,IAAL,GAAYC,IAAI,CAACC,SAAL,CAAeJ,IAAf,CAAZ;AAEA,SAAOA,IAAP;AACH;;AAED,MAAMS,UAAN,CAAiB;AACbC,EAAAA,OAAO,CAAEC,OAAF,EAAW;AACd,WAAO,IAAIC,OAAJ,CAAYC,OAAO,IAAI;AAC1B,YAAM;AAAEC,QAAAA,GAAF;AAAOC,QAAAA;AAAP,UAAkBJ,OAAxB;AAEAK,MAAAA,UAAU,CAAC,MAAM;AACb,aAAK,IAAIC,IAAT,IAAiBzB,OAAjB,EAA0B;AACtB,cAAGsB,GAAG,CAACI,QAAJ,CAAaD,IAAb,CAAH,EAAuB;AACnB,kBAAME,UAAU,GAAG3B,OAAO,CAACyB,IAAD,CAA1B;;AAEA,gBAAIE,UAAJ,EAAgB;AACZN,cAAAA,OAAO,CACHnB,kBAAkB,CAACyB,UAAU,CAACC,MAAX,CAAkBT,OAAlB,CAAD,CADf,CAAP;AAGH,aAJD,MAMK;AACDE,cAAAA,OAAO,CACHR,kBAAkB,CAAC,oBAAD,EAAuB,uBAAvB,CADf,CAAP;AAGH;AACJ;AACJ;AACJ,OAlBS,EAkBPd,cAlBO,CAAV;AAmBH,KAtBM,CAAP;AAuBH;;AAzBY;;AA4BjB,eAAe,IAAIkB,UAAJ,EAAf","sourcesContent":["import * as mock from './MockData'\r\n\r\nimport directoryController from './controllers/DirectoryController'\r\nimport appointmentController from './controllers/AppointmentController'\r\n\r\nconst RESPONSE_DELAY = 1000\r\n\r\nconst ROUTING = {\r\n    [directoryController.getPath()]: directoryController,\r\n    [appointmentController.getPath()]: appointmentController\r\n}\r\n\r\nfunction getSuccessResponse (data, extraBodyProps = {}, extraProps = {}) {\r\n    let body = { success: true, ...extraBodyProps }\r\n\r\n    if (data) {\r\n        body.data = data\r\n    }\r\n\r\n    let resp = {\r\n        body,\r\n        ...extraProps,\r\n        statusCode: 200\r\n    }\r\n\r\n    // текстовое представление ответа\r\n    resp.text = JSON.stringify(resp)\r\n\r\n    return resp\r\n}\r\n\r\nfunction getFailureResponse (code = 'error', message = 'Error', statusCode = 500) {\r\n    let resp = {\r\n        body: {\r\n            success: false,\r\n            error: {\r\n                code,\r\n                message\r\n            }\r\n        },\r\n        statusCode: statusCode\r\n    }\r\n\r\n    // текстовое представление ответа\r\n    resp.text = JSON.stringify(resp)\r\n\r\n    return resp\r\n}\r\n\r\nclass MockServer {\r\n    service (request) {\r\n        return new Promise(resolve => {\r\n            const { url, params } = request\r\n\r\n            setTimeout(() => {\r\n                for (let path in ROUTING) {\r\n                    if(url.includes(path)) {\r\n                        const controller = ROUTING[path]\r\n\r\n                        if (controller) {\r\n                            resolve(\r\n                                getSuccessResponse(controller.handle(request))\r\n                            )\r\n                        }\r\n\r\n                        else {\r\n                            resolve(\r\n                                getFailureResponse('resource.not.found', 'Resource is not found')\r\n                            )\r\n                        }\r\n                    }\r\n                }\r\n            }, RESPONSE_DELAY)\r\n        })\r\n    }\r\n}\r\n\r\nexport default new MockServer()"]},"metadata":{},"sourceType":"module"}