{"ast":null,"code":"// eslint-disable-next-line no-unused-vars\nimport Immutable from 'immutable';\nimport InitialState from './AppointmentListInitialState';\nimport { ACTION_TYPES } from '../../../lib/Constans';\nconst {\n  CLEAN_APPOINTMENT_LIST_ERROR,\n  CLEAN_APPOINTMENT_LIST,\n  CLEAN_APPOINTMENT_LIST_FILTER,\n  CHANGE_APPOINTMENT_LIST_FILTER,\n  CHANGE_APPOINTMENT_LIST_FILTER_FIELD,\n  LOAD_APPOINTMENT_LIST_REQUEST,\n  LOAD_APPOINTMENT_LIST_SUCCESS,\n  LOAD_APPOINTMENT_LIST_FAILURE\n} = ACTION_TYPES;\nconst initialState = new InitialState();\nexport default function (state = initialState, action) {\n  // важный код! state может быть undefined\n  if (!(state instanceof InitialState)) {\n    return initialState.mergeDeep(state);\n  }\n\n  switch (action.type) {\n    // сбрасываем все значения\n    case CLEAN_APPOINTMENT_LIST:\n      return state.clear().setIn(['shouldReload'], action.payload || false);\n    // сбрасываем ошибку\n\n    case CLEAN_APPOINTMENT_LIST_ERROR:\n      return state.removeIn(['error']);\n    // сбрасываем все значения фильтра\n\n    case CLEAN_APPOINTMENT_LIST_FILTER:\n      return state.getIn(['dataSource', 'f']).clear().setIn(['shouldReload'], true);\n    // применяем множество значений фильтра\n\n    case CHANGE_APPOINTMENT_LIST_FILTER:\n      {\n        const {\n          changes,\n          shouldReload\n        } = action.payload;\n\n        if (changes) {\n          return state.mergeIn(['dataSource', 'filter'], changes).setIn(['shouldReload'], shouldReload);\n        }\n\n        break;\n      }\n    // изменяем одно значение фильтра\n\n    case CHANGE_APPOINTMENT_LIST_FILTER_FIELD:\n      {\n        const {\n          name,\n          value,\n          shouldReload = true\n        } = action.payload;\n        return state.setIn(['dataSource', 'filter', name], value).setIn(['shouldReload'], shouldReload);\n      }\n    // сигнализируем о том, что началась загрузка данных списка с сервера\n\n    case LOAD_APPOINTMENT_LIST_REQUEST:\n      return state.setIn(['error'], null).setIn(['shouldReload'], false).setIn(['isFetching'], true);\n    // сохраняем данные, пришедшие с сервера\n\n    case LOAD_APPOINTMENT_LIST_SUCCESS:\n      {\n        const {\n          data\n        } = action.payload;\n        return state.setIn(['isFetching'], false).setIn(['shouldReload'], false).setIn(['dataSource', 'data'], action.payload);\n      }\n    // сохраняем ошибку\n\n    case LOAD_APPOINTMENT_LIST_FAILURE:\n      return state.setIn(['isFetching'], false).setIn(['shouldReload'], false).setIn(['error'], action.payload);\n  }\n\n  return state;\n}","map":{"version":3,"sources":["E:/Git/Work/SynodalLegalDedartament3.0/my-app/src/redux/appointment/list/appointmentListReducer.js"],"names":["Immutable","InitialState","ACTION_TYPES","CLEAN_APPOINTMENT_LIST_ERROR","CLEAN_APPOINTMENT_LIST","CLEAN_APPOINTMENT_LIST_FILTER","CHANGE_APPOINTMENT_LIST_FILTER","CHANGE_APPOINTMENT_LIST_FILTER_FIELD","LOAD_APPOINTMENT_LIST_REQUEST","LOAD_APPOINTMENT_LIST_SUCCESS","LOAD_APPOINTMENT_LIST_FAILURE","initialState","state","action","mergeDeep","type","clear","setIn","payload","removeIn","getIn","changes","shouldReload","mergeIn","name","value","data"],"mappings":"AAAA;AACA,OAAOA,SAAP,MAAsB,WAAtB;AAEA,OAAOC,YAAP,MAAyB,+BAAzB;AAEA,SAASC,YAAT,QAA6B,uBAA7B;AAEA,MAAM;AACFC,EAAAA,4BADE;AAGFC,EAAAA,sBAHE;AAKFC,EAAAA,6BALE;AAMFC,EAAAA,8BANE;AAOFC,EAAAA,oCAPE;AASFC,EAAAA,6BATE;AAUFC,EAAAA,6BAVE;AAWFC,EAAAA;AAXE,IAYFR,YAZJ;AAcA,MAAMS,YAAY,GAAG,IAAIV,YAAJ,EAArB;AAEA,eAAe,UAAUW,KAAK,GAAGD,YAAlB,EAAgCE,MAAhC,EAAwC;AAEnD;AACA,MAAI,EAAED,KAAK,YAAYX,YAAnB,CAAJ,EAAsC;AAClC,WAAOU,YAAY,CAACG,SAAb,CAAuBF,KAAvB,CAAP;AACH;;AAED,UAAQC,MAAM,CAACE,IAAf;AAEI;AACA,SAAKX,sBAAL;AACI,aAAOQ,KAAK,CAACI,KAAN,GACFC,KADE,CACI,CAAC,cAAD,CADJ,EACsBJ,MAAM,CAACK,OAAP,IAAkB,KADxC,CAAP;AAGJ;;AACA,SAAKf,4BAAL;AACI,aAAOS,KAAK,CAACO,QAAN,CAAe,CAAC,OAAD,CAAf,CAAP;AAEJ;;AACA,SAAKd,6BAAL;AACI,aAAOO,KAAK,CAACQ,KAAN,CAAY,CAAC,YAAD,EAAe,GAAf,CAAZ,EAAiCJ,KAAjC,GACFC,KADE,CACI,CAAC,cAAD,CADJ,EACsB,IADtB,CAAP;AAGJ;;AACA,SAAKX,8BAAL;AAAqC;AACjC,cAAM;AAAEe,UAAAA,OAAF;AAAWC,UAAAA;AAAX,YAA4BT,MAAM,CAACK,OAAzC;;AAEA,YAAIG,OAAJ,EAAa;AACT,iBAAOT,KAAK,CACPW,OADE,CACM,CAAC,YAAD,EAAe,QAAf,CADN,EACgCF,OADhC,EAEFJ,KAFE,CAEI,CAAC,cAAD,CAFJ,EAEsBK,YAFtB,CAAP;AAGH;;AAED;AACH;AAED;;AACA,SAAKf,oCAAL;AAA2C;AACvC,cAAM;AAAEiB,UAAAA,IAAF;AAAQC,UAAAA,KAAR;AAAeH,UAAAA,YAAY,GAAG;AAA9B,YAAuCT,MAAM,CAACK,OAApD;AAEA,eAAON,KAAK,CACPK,KADE,CACI,CAAC,YAAD,EAAe,QAAf,EAAyBO,IAAzB,CADJ,EACoCC,KADpC,EAEFR,KAFE,CAEI,CAAC,cAAD,CAFJ,EAEsBK,YAFtB,CAAP;AAGH;AAED;;AACA,SAAKd,6BAAL;AACI,aAAOI,KAAK,CACPK,KADE,CACI,CAAC,OAAD,CADJ,EACe,IADf,EAEFA,KAFE,CAEI,CAAC,cAAD,CAFJ,EAEsB,KAFtB,EAGFA,KAHE,CAGI,CAAC,YAAD,CAHJ,EAGoB,IAHpB,CAAP;AAKJ;;AACA,SAAKR,6BAAL;AAAoC;AAChC,cAAM;AACFiB,UAAAA;AADE,YAEFb,MAAM,CAACK,OAFX;AAIA,eAAON,KAAK,CACPK,KADE,CACI,CAAC,YAAD,CADJ,EACoB,KADpB,EAEFA,KAFE,CAEI,CAAC,cAAD,CAFJ,EAEsB,KAFtB,EAGFA,KAHE,CAGI,CAAC,YAAD,EAAe,MAAf,CAHJ,EAG4BJ,MAAM,CAACK,OAHnC,CAAP;AAIH;AAED;;AACA,SAAKR,6BAAL;AACI,aAAOE,KAAK,CACPK,KADE,CACI,CAAC,YAAD,CADJ,EACoB,KADpB,EAEFA,KAFE,CAEI,CAAC,cAAD,CAFJ,EAEsB,KAFtB,EAGFA,KAHE,CAGI,CAAC,OAAD,CAHJ,EAGeJ,MAAM,CAACK,OAHtB,CAAP;AA3DR;;AAiEA,SAAON,KAAP;AACH","sourcesContent":["// eslint-disable-next-line no-unused-vars\r\nimport Immutable from 'immutable'\r\n\r\nimport InitialState from './AppointmentListInitialState'\r\n\r\nimport { ACTION_TYPES } from '../../../lib/Constans'\r\n\r\nconst {\r\n    CLEAN_APPOINTMENT_LIST_ERROR,\r\n\r\n    CLEAN_APPOINTMENT_LIST,\r\n\r\n    CLEAN_APPOINTMENT_LIST_FILTER,\r\n    CHANGE_APPOINTMENT_LIST_FILTER,\r\n    CHANGE_APPOINTMENT_LIST_FILTER_FIELD,\r\n\r\n    LOAD_APPOINTMENT_LIST_REQUEST,\r\n    LOAD_APPOINTMENT_LIST_SUCCESS,\r\n    LOAD_APPOINTMENT_LIST_FAILURE\r\n} = ACTION_TYPES\r\n\r\nconst initialState = new InitialState()\r\n\r\nexport default function (state = initialState, action) {\r\n\r\n    // важный код! state может быть undefined\r\n    if (!(state instanceof InitialState)) {\r\n        return initialState.mergeDeep(state)\r\n    }\r\n\r\n    switch (action.type) {\r\n\r\n        // сбрасываем все значения\r\n        case CLEAN_APPOINTMENT_LIST:\r\n            return state.clear()\r\n                .setIn(['shouldReload'], action.payload || false)\r\n\r\n        // сбрасываем ошибку\r\n        case CLEAN_APPOINTMENT_LIST_ERROR:\r\n            return state.removeIn(['error'])\r\n\r\n        // сбрасываем все значения фильтра\r\n        case CLEAN_APPOINTMENT_LIST_FILTER:\r\n            return state.getIn(['dataSource', 'f']).clear()\r\n                .setIn(['shouldReload'], true)\r\n\r\n        // применяем множество значений фильтра\r\n        case CHANGE_APPOINTMENT_LIST_FILTER: {\r\n            const { changes, shouldReload } = action.payload\r\n\r\n            if (changes) {\r\n                return state\r\n                    .mergeIn(['dataSource', 'filter'], changes)\r\n                    .setIn(['shouldReload'], shouldReload)\r\n            }\r\n\r\n            break\r\n        }\r\n\r\n        // изменяем одно значение фильтра\r\n        case CHANGE_APPOINTMENT_LIST_FILTER_FIELD: {\r\n            const { name, value, shouldReload = true } = action.payload\r\n\r\n            return state\r\n                .setIn(['dataSource', 'filter', name], value)\r\n                .setIn(['shouldReload'], shouldReload)\r\n        }\r\n\r\n        // сигнализируем о том, что началась загрузка данных списка с сервера\r\n        case LOAD_APPOINTMENT_LIST_REQUEST:\r\n            return state\r\n                .setIn(['error'], null)\r\n                .setIn(['shouldReload'], false)\r\n                .setIn(['isFetching'], true)\r\n\r\n        // сохраняем данные, пришедшие с сервера\r\n        case LOAD_APPOINTMENT_LIST_SUCCESS: {\r\n            const {\r\n                data\r\n            } = action.payload\r\n\r\n            return state\r\n                .setIn(['isFetching'], false)\r\n                .setIn(['shouldReload'], false)\r\n                .setIn(['dataSource', 'data'], action.payload)\r\n        }\r\n\r\n        // сохраняем ошибку\r\n        case LOAD_APPOINTMENT_LIST_FAILURE:\r\n            return state\r\n                .setIn(['isFetching'], false)\r\n                .setIn(['shouldReload'], false)\r\n                .setIn(['error'], action.payload)\r\n    }\r\n\r\n    return state\r\n}\r\n"]},"metadata":{},"sourceType":"module"}